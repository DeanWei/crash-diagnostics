language: go
go:
- 1.13.x
env:
  global:
  - GOPROXY=https://proxy.golang.org
  - GO111MODULE=on
  - secure: eq9Di14VCKkjPNb1H9bVTk86S7H7gT6AzOmrzf8peAUh7oeXxjffQ31PXBQoF8Cb908wcgcOyU+UgUN+TobRSCSgjvQVL1HZ9SfgjthW8J/U3MOHpmmc2LKcgMEhlC8hGM+AzCACWtFbqz/cE+E6BamUSy9iTNGBJQXCOwsBar3LpUsTUnnkGxcqyLC/EJa1LPK7fgifD14u3TSQnIMTE7AK65HKsiI/cC7AI/TiDe0w+ueidMAhpXT+B1F/0j4yU3y2Q1SlppFZqxeNvk0LBIp0Nm5GHZa0e3UPkoD1Mju/GPahifUkSucHG0HTMS2Ro4pUncAgj3yjb4oBIRClp1rpfmnSAuEL/4jY45R8ZXDwn9+hYnwlGEHmGSuZhXWsxDvwQQyokOSFronw0bF00oNrL+Gr03gv9Gj6lDGMy6kUzMtEWrnySSuO7FIn4HhBEdi7MtSt8ugcatWFBhFzEIVh2X+csA2zVTfYvQyQo5RurQmu4p3ImjawXF5yq58Qk3Rp5Syfe7y+aBk7i6CZOWgPxx14jBE98oRwZqdeAyhbD1ECeV8/1d7vdlnn2KbrayPY9ocPnzsZjBlVwIfaWSdtTkaiAc8GDf46ifU/TA438K1iYI/UEFh4m3ot4eVBibnJL8GtdJw1pukRrowvb7SfP4BkmsJUqC4BynLcDxU=
script:
- go run .ci/prebuild/gofmt_check.go
- go test -v ./...
- go run .ci/build/build.go
before_deploy:
- sudo snap install --classic goreleaser
- export PUBLISH=true
deploy:
- provider: script
  skip_cleanup: true
  script: go run .ci/deploy/travis_deploy.go
  on:
    repo: vmware-tanzu/crash-diagnostics
    all_branches: true
